#ifndef MT_XGPIO
#define MT_XGPIO

#include "xgpio.h"


class MtXGpio;
class MtXgpioBitDefinition;


class MtXGpio {
protected:
	XGpio myXGpio_;
	u32 oValue_[2] = { 0x0, 0x0 };
public:
	MtXGpio(u16 deviceID);
	MtXGpio(u16 deviceID, u32 directionMask1);
	MtXGpio(u16 deviceID, u32 directionMask1, u32 directionMask2);
	void setDirection(u32 directionMask, unsigned int channel = 1);
	void setValue(u32 value, unsigned int channel = 1);
	u32 getValue(unsigned int channel = 1);
	void setBit(bool bitValue, unsigned int bitIndex, unsigned int channel = 1);
	void toggleBit(unsigned int bitIndex, unsigned int channel = 1);
	bool getBit(unsigned int bitIndex, unsigned int channel = 1);
};


class MtXgpioBitDefinition {
protected:
	unsigned int channel_ = 1;
	unsigned int index_ = 0;
	MtXGpio& mtxgpio_;
public:
	MtXgpioBitDefinition(unsigned int index, unsigned int channel, MtXGpio& mtxgpio) {
		channel_ = channel;
		index_ = index;
		mtxgpio_ = mtxgpio;
	}
	unsigned int channel() {
		return channel_;
	}
	unsigned int index() {
		return index_;
	}
	void set() {
		mtxgpio_.setBit(TRUE, index_, channe_);
	}
	void set(bool value) {
		mtxgpio_.setBit(value, index_, channe_);
	}
	void reset() {
		mtxgpio_.setBit(FALSE, index_, channe_);
	}
	void toggle() {
		mtxgpio_.toggleBit(index_, channel_);
	}
	bool get() {
		return mtxgpio_.getBit(index_, channel_);
	}
};

#endif
